{% extends "base.html" %}

{% block title %}Success{% endblock %}

{% block content %}
<div class="container mt-5">
  {% include('layout/flash.html') %}

  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-sm border-0">
        <div class="card-body text-center">
          <h1 class="mb-4 text-success">Note URL:</h1>
          <div class="alert alert-light border text-center" role="alert">
            <span id="noteLink" class="fs-5 fw-bold text-primary" style="cursor: pointer;">
              {{ link }}
            </span>
          </div>
          <small class="text-muted">Click the link above to copy it to the clipboard.</small>

          <div class="mt-4">
            <a href="{{ url_for('webapp.create') }}" class="btn btn-primary btn-lg">
              <i class="bi bi-plus-circle"></i> Create Another Note
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // Add click event listener to copy the link to clipboard
  document.getElementById('noteLink').addEventListener('click', function () {
    const linkText = this.textContent;
    navigator.clipboard.writeText(linkText).then(() => {
      alert('Link copied to clipboard!');
    }).catch(err => {
      console.error('Failed to copy: ', err);
    });
  });
</script>
{% endblock %}
